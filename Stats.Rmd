---
title: "Stats"
output: 
  html_document: 
    toc: true
    toc_float: true
    collapsed: false
    number_sections: false
    toc_depth: 2
---

# OA Stats
This section is to track the OA status and citation counts of publications by the Tech authors with the publication dates from 2016 through 2020. 

## May
Scopus application is used to retrieve data on May 2nd, 2022. 

```{r, echo=FALSE}
library(tidyverse)
library(pivottabler)

#---- Prepare data for analysis ----
scopus_202203_1 <- read_csv("data/scopus_2016_20220301.csv")
scopus_202203_2 <- read_csv("data/scopus_2017_20220301.csv")
scopus_202203_3 <- read_csv("data/scopus_2018_20220301.csv")
scopus_202203_4 <- read_csv("data/scopus_2019_20220301.csv")
scopus_202203_5 <- read_csv("data/scopus_2020_20220301.csv")

# combine all the 5 files into 1
scopus_march <- rbind(scopus_202203_1, scopus_202203_2, scopus_202203_3, scopus_202203_4, scopus_202203_5)

# select only columns relevant
scopus_march <- scopus_march[c(1,3,4,5,12,13,15:17,19)]

#rename columns
names(scopus_march)[c(1:10)] <- c("author", "title", "year", "source_title", "citations_march", "DOI", "doc_type", "pub_stage", "oa_status_march", "EID")

# Replace NAs in citations and OA status, remove rows with missing or duplicated DOIs
scopus_march <- scopus_march %>% 
  replace_na(list(oa_status_march = "Closed", citations_march = 0)) %>% 
  filter(!is.na(DOI)) %>% 
  filter(!DOI %in% DOI[duplicated(DOI)])

# read April data
scopus_april <- read_csv("data/scopus_20220419.csv")


# select only columns relevant
scopus_april <- scopus_april[c(1,3,4,5,12,13,15:17,19)]

# rename columns
names(scopus_april)[c(1:10)] <- c("author", "title", "year", "source_title", "citations_april", "DOI", "doc_type", "pub_stage", "oa_status_april", "EID")


# Replace NAs in citations and OA status, remove rows with missing or duplicated DOIs
scopus_april <- scopus_april %>% 
  replace_na(list(oa_status_april = "Closed", citations_april = 0)) %>% 
  filter(!is.na(DOI)) %>% 
  filter(!DOI %in% DOI[duplicated(DOI)])

# read May data
scopus_may <- read_csv("data/scopus_20220502.csv")


# select only columns relevant
scopus_may <- scopus_may[c(1,3,4,5,12,13,15:17,19)]

# rename columns
names(scopus_may)[c(1:10)] <- c("author", "title", "year", "source_title", "citations_may", "DOI", "doc_type", "pub_stage", "oa_status_may", "EID")


# Replace NAs in citations and OA status, remove rows with missing or duplicated DOIs
scopus_may <- scopus_may %>% 
  replace_na(list(oa_status_may = "Closed", citations_may = 0)) %>% 
  filter(!is.na(DOI)) %>% 
  filter(!DOI %in% DOI[duplicated(DOI)])

# records removed from March
removed <- anti_join(scopus_march, scopus_may, by = "DOI") 
removed <- removed %>%
  select(source_title, year, pub_stage, oa_status_march, DOI) %>% 
  arrange(source_title)

# new records in May
added <- anti_join(scopus_may, scopus_march, by = "DOI") 

added <- added %>% 
  select(source_title, year, pub_stage, oa_status_may, DOI) %>% 
  arrange(source_title)

# shared items of April and May
main <- inner_join(scopus_april, scopus_may, by = "DOI")
main <- main[-c(11:14, 16, 17, 19)]

names(main)[c(1:12)] <- c("author", "title", "year", "source_title", "citations_april", "DOI", "doc_type", "pub_stage", "oa_status_april", "EID", "citations_may", "oa_status_may")
```
* Number of records (Comparing with March)
  After removing records with missing DOIs or duplicated DOIs, 9,852 records were kept. 14 items were removed from the data set of March and 47 items were added. The total data change was around 0.6%.
  
* OA Status (Comparing with April)
  * Comparing with April, 3 OA items turned to be closed; while 9 items became open access. 
  * **14 items turned green where 5 of them were closed items in April**. 3 items lost their green status.

```{r, echo=FALSE}
#---- Findings - OA Status ----
oa_status_change <- main %>% 
  select(title, source_title, year, oa_status_april, oa_status_may, DOI) %>% 
  filter(main$oa_status_april != main$oa_status_may) %>% 
  arrange(source_title)

open2close <- oa_status_change %>% 
  filter(oa_status_may == "Closed")

close2open <- oa_status_change %>% 
  filter(oa_status_april == "Closed")

close2green <- oa_status_change %>% 
  filter(oa_status_april == "Closed" & oa_status_may == "All Open Access, Green")
  
green_added <- oa_status_change %>% 
  filter(!str_detect(oa_status_april, "Green") & str_detect(oa_status_may, "Green"))

green_removed <- oa_status_change %>% 
  filter(str_detect(oa_status_april, "Green") & !str_detect(oa_status_may, "Green"))
```

Publications by Year & by OA Status (Data Retrieved on May 2)
```{r, echo=FALSE}
# OA status in May
main %>% 
  separate(oa_status_may, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(year) %>% 
  count(is_oa, oa_status) %>% 
  mutate(percent = 100*n/sum(n)) %>% 
  ungroup() %>% 
  qhpvt(
    c("is_oa","oa_status"), 
    "year", 
    c("Count" = "sum(n)", "%" = "sum(percent)"),
    formats = list("%.0f", "%.2f"),
    totals = list("is_oa" = "Total", "oa_status" = "Total"),
    totalStyle = list("font-weight"="bold")
    )
```
* Citations
  * Comparing with April, 1,003 items obtained more citations.
  * Citations per paper(CpP) for OA publications was almost 30 while for closed publications was a little bit over 10. 

```{r, echo=FALSE}
# Citations in May
citations_change <- main %>% 
  select(title, source_title, year, citations_april, citations_may) %>% 
  filter(citations_may-citations_april != 0) %>% 
  mutate(citations_diff = citations_may - citations_april, 
         citations_percentage = ifelse(
           citations_april != 0, (citations_may - citations_april)*100 / citations_april, ifelse(citations_april == 0, NA, 999))) %>% 
  arrange(desc(citations_diff), desc(citations_percentage))

citations_error <- citations_change %>% 
  select(title, source_title, year, citations_april, citations_may, citations_diff) %>% 
  filter(citations_diff < 0)

citations_per_paper_05 <- main %>%
  separate(oa_status_may, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(is_oa) %>% 
  mutate(CpP_05 = sum(citations_may)/n()) %>% 
  select(CpP_05)
```
Citations by Year & by OA Status (Data Retrieved on May 2)

```{r, echo=FALSE}
# Citations per Paper in May
main %>% 
  separate(oa_status_may, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(year, oa_status) %>% 
  mutate(citations_per_paper = round(sum(citations_may)/n())) %>%   # added a new column the citations per paper
  select(year, is_oa, oa_status, citations_may, citations_per_paper) %>%  
  ungroup() %>%  
  qhpvt(
    c("is_oa", "oa_status"), 
    "year", 
    c("Count" = "n()", "CpP" = "sum(citations_per_paper)/n()"),
    formats = list("%.0f", "%.0f"),
    totals = list("oa_status" = "Total", "Year" = "Total"),
    totalStyle = list("font-weight"="bold")
    )
```


## April

Both Scopus API and the application Scopus are used to retrieve the OA status and citation counts. The same data set as last month was used to acquire data through Scopus API. The application Scopus can find not only items moved out of Scopus but new items added to Scopus. The application Scopus will be used from May and the March data will be used as the benchmark for comparison. 

```{r, echo=FALSE}
library(tidyverse)
library(pivottabler)

#---- Prepare data for analysis ----
scopus_202203_1 <- read_csv("data/scopus_2016_20220301.csv")
scopus_202203_2 <- read_csv("data/scopus_2017_20220301.csv")
scopus_202203_3 <- read_csv("data/scopus_2018_20220301.csv")
scopus_202203_4 <- read_csv("data/scopus_2019_20220301.csv")
scopus_202203_5 <- read_csv("data/scopus_2020_20220301.csv")

# combine all the 5 files into 1
scopus_march <- rbind(scopus_202203_1, scopus_202203_2, scopus_202203_3, scopus_202203_4, scopus_202203_5)

# select only columns relevant
scopus_march <- scopus_march[c(1,3,4,5,12,13,15:17,19)]

# test <- filter(scopus_march, !is.na(DOI)) # remove records with missing DOIs

# remove records with duplicated DOIs, several solutions on the page - https://stackoverflow.com/questions/32259620/how-to-remove-unique-entry-and-keep-duplicates-in-r

# solution 1 - the following 2 lines, but do not understand
# test_2 <- test[unlist(tapply(1:nrow(test), test$DOI, function(x) if (length(x) > 1)x)), ]
# test <- test %>% anti_join(test_2)

# solution 2 
# test_4 <- test[!test$DOI %in% test$DOI[duplicated(test$DOI)],]

# solution 3 - cannot use == or != here, but do not understand why
# test_5 <- filter(test, !DOI %in%  DOI[duplicated(DOI)])

# solution 4 
# test_6 <- test %>% group_by(DOI) %>% filter(n() == 1)


#rename columns
names(scopus_march)[c(1:10)] <- c("author", "title", "year", "source_title", "citations_march", "DOI", "doc_type", "pub_stage", "oa_status_march", "EID")

# Replace NAs in citations and OA status, remove rows with missing or duplicated DOIs
scopus_march <- scopus_march %>% 
  replace_na(list(oa_status_march = "Closed", citations_march = 0)) %>% 
  filter(!is.na(DOI)) %>% 
  filter(!DOI %in% DOI[duplicated(DOI)])


# read April data
scopus_april <- read_csv("data/scopus_20220419.csv")


# select only columns relevant
scopus_april <- scopus_april[c(1,3,4,5,12,13,15:17,19)]

# rename columns
names(scopus_april)[c(1:10)] <- c("author", "title", "year", "source_title", "citations_april", "DOI", "doc_type", "pub_stage", "oa_status_april", "EID")


# Replace NAs in citations and OA status, remove rows with missing or duplicated DOIs
scopus_april <- scopus_april %>% 
  replace_na(list(oa_status_april = "Closed", citations_april = 0)) %>% 
  filter(!is.na(DOI)) %>% 
  filter(!DOI %in% DOI[duplicated(DOI)])
```
* Number of records
    * The search of 03/01/2022 kept 9,819 records after removing those with duplicated  or missing DOIs.
    * The search of 04/19/2022 kept 9,854 records. Comparing with the data from last month, 11 records were moved out from the Scopus databases and 46 records were added. The total data change was around 0.6% this month. 

```{r, echo=FALSE}
#---- Findings - Number of Items ----
# records removed from March
removed <- anti_join(scopus_march, scopus_april, by = "DOI") 
removed <- removed %>%
  select(source_title, year, pub_stage, oa_status_march, DOI) %>% 
  arrange(source_title)

# new records in April
added <- anti_join(scopus_april, scopus_march, by = "DOI") 

added <- added %>% 
  select(source_title, year, pub_stage, oa_status_april, DOI) %>% 
  arrange(source_title)

main <- inner_join(scopus_march, scopus_april, by = "DOI")
main <- main[-c(11:14, 16, 17, 19)]

names(main)[c(1:12)] <- c("author", "title", "year", "source_title", "citations_march", "DOI", "doc_type", "pub_stage", "oa_status_march", "EID", "citations_april", "oa_status_april")
```
* OA Status

    * In April, **24 OA items turned to be closed**, and **33 closed items became open access**.
    * In total, **35 items were added to repositories**, turned to be green, while **14 items lost their "green" status**. 
    * The following two tables show the number of publications by year and by OA status. Data of April came first, followed with data of March. All the data retrieved through Scopus application. 

```{r, echo=FALSE}
#---- Findings - OA Status ----
oa_status_change <- main %>% 
  select(title, source_title, year, oa_status_march, oa_status_april, DOI) %>% 
  filter(main$oa_status_march != main$oa_status_april) %>% 
  arrange(source_title)

open2close <- oa_status_change %>% 
  filter(oa_status_april == "Closed")

close2open <- oa_status_change %>% 
  filter(oa_status_march == "Closed")

close2green <- oa_status_change %>% 
  filter(oa_status_march == "Closed" & oa_status_april == "All Open Access, Green")
  
green_added <- oa_status_change %>% 
  filter(!str_detect(oa_status_march, "Green") & str_detect(oa_status_april, "Green"))

green_removed <- oa_status_change %>% 
  filter(str_detect(oa_status_march, "Green") & !str_detect(oa_status_april, "Green"))
```
OA Status Data Retrieved on April 19 (Scopus Application)

```{r, echo=FALSE}
# OA status in April
main %>% 
  separate(oa_status_april, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(year) %>% 
  count(is_oa, oa_status) %>% 
  mutate(percent = 100*n/sum(n)) %>% 
  ungroup() %>% 
  qhpvt(
    c("is_oa","oa_status"), 
    "year", 
    c("Count" = "sum(n)", "%" = "sum(percent)"),
    formats = list("%.0f", "%.2f"),
    totals = list("is_oa" = "Total", "oa_status" = "Total"),
    totalStyle = list("font-weight"="bold")
    )
```
OA Status Data Retrieved on March 1 (Scopus Application)

```{r, echo=FALSE}
# OA status in March
main %>% 
  separate(oa_status_march, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(year) %>% 
  count(is_oa, oa_status) %>% 
  mutate(percent = 100*n/sum(n)) %>% 
  ungroup() %>% 
  qhpvt(
    c("is_oa","oa_status"), 
    "year", 
    c("Count" = "sum(n)", "%" = "sum(percent)"),
    formats = list("%.0f", "%.2f"),
    totals = list("is_oa" = "Total", "oa_status" = "Total"),
    totalStyle = list("font-weight"="bold")
    ) 


```
* Citations
    * Comparing the data of April and March, 3,236 publications got more citations, while *9 items saw a decrease in citation counts*.
    * No big changes in Citations per Paper (CpP) from March to April. CpP for OA publication was around 28 while that for closed publication was almost 10. 
    * The following two tables show the Citations per Paper (CpP) by year and by OA status. Data of April came first, followed with data of March. All the data retrieved through Scopus application. 

```{r, echo=FALSE}
#---- Findings - Citation Counts ----
citations_change <- main %>% 
  select(title, source_title, year, citations_march, citations_april) %>% 
  filter(citations_april-citations_march != 0) %>% 
  mutate(citations_diff = citations_april - citations_march, 
         citations_percentage = ifelse(
           citations_march != 0, (citations_april - citations_march)*100 / citations_march, ifelse(citations_march == 0, NA, 999))) %>% 
  arrange(desc(citations_diff), desc(citations_percentage))

citations_error <- citations_change %>% 
  select(title, source_title, year, citations_march, citations_april, citations_diff) %>% 
  filter(citations_diff < 0)

citations_per_paper_04 <- main %>%
  separate(oa_status_april, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(is_oa) %>% 
  mutate(CpP_04 = sum(citations_april)/n()) %>% 
  select(CpP_04)

citations_per_paper_03 <- main %>%
  separate(oa_status_march, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(is_oa) %>% 
  mutate(CpP_03 = sum(citations_march)/n()) %>% 
  select(CpP_03)

top_400_diff <- main %>% 
  select(title, source_title, year, citations_march, citations_april) %>% 
  mutate(citations_diff = citations_april - citations_march, 
         citations_percentage = ifelse(
           citations_march != 0, (citations_april - citations_march)*100 / citations_march, ifelse(citations_march == 0, NA, 999))) %>% 
  arrange(desc(citations_diff)) %>% 
  head(400)

top_400_diff_percentage <- main %>% 
  select(title, source_title, year, citations_march, citations_april) %>% 
  mutate(citations_diff = citations_april - citations_march, 
         citations_percentage = ifelse(
           citations_march != 0, (citations_april - citations_march)*100 / citations_march, ifelse(citations_march == 0, NA, 999))) %>% 
  arrange(desc(citations_percentage)) %>% 
  head(400)

top_increase <- inner_join(top_400_diff, top_400_diff_percentage)
```

Citations Data Retrieved on April 19 (Scopus Application)
```{r, echo=FALSE}
# Citations per Paper in April
main %>% 
  separate(oa_status_april, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(year, oa_status) %>% 
  mutate(citations_per_paper = round(sum(citations_april)/n())) %>%   # added a new column the citations per paper
  select(year, is_oa, oa_status, citations_april, citations_per_paper) %>%  
  ungroup() %>%  
  qhpvt(
    c("is_oa", "oa_status"), 
    "year", 
    c("Count" = "n()", "CpP" = "sum(citations_per_paper)/n()"),
    formats = list("%.0f", "%.0f"),
    totals = list("oa_status" = "Total", "Year" = "Total"),
    totalStyle = list("font-weight"="bold")
    )
```
Citations Data Retrieved on March 1 (Scopus Application)

```{r, echo=FALSE}
# Citations per Paper in March
main %>% 
  separate(oa_status_march, c("is_oa", "oa_status", "ex_green"), sep = ", ") %>% 
  replace_na(list(oa_status = "Closed")) %>% 
  group_by(year, oa_status) %>% 
  mutate(citations_per_paper = round(sum(citations_march)/n())) %>%   # added a new column the citations per paper
  select(year, is_oa, oa_status, citations_march, citations_per_paper) %>%  
  ungroup() %>%  
  qhpvt(
    c("is_oa", "oa_status"), 
    "year", 
    c("Count" = "n()", "CpP" = "sum(citations_per_paper)/n()"),
    formats = list("%.0f", "%.0f"),
    totals = list("oa_status" = "Total", "Year" = "Total"),
    totalStyle = list("font-weight"="bold")
    ) 

# write_csv(removed, "data_output/removed_april.csv")
# write_csv(close2green, "data_output/closed2green.csv")
# write_csv(open2close, "data_output/open2close.csv")

```
    
## March

Comparing the OA status information from Scopus and Unpaywall:

* The total OA counts were almost the same;
* The counts of specific OA status were different. If we could not quickly identify which source is more reliable, I suggested we use Scopus OA data because it is easier and less time-consuming to obtain.
* The **overall journal article OA percentage was 45%** and **conference proceedings was around 10%**. 
* **Citations per paper** for closed publication were **10**; while for **green or gold OA publications** were around **20**. 
* Scopus updates its data constantly. The data retrieved on March 1st and March 3rd using the same query were a little bit different. Next month, I will try to use the **Scopus API** to track the OA status and citations for the data set of 10,498 records (retrieved on March 1st, 2022). 

<br>

The following table shows the count and percentage by OA status and year.

```{r, echo=FALSE}
# install.packages("qwraps2") # not used
# install.packages("gt") # not used
# install.packages("pivottabler")

library(tidyverse)
library(pivottabler)

oa_stats_march <- read_csv("data/oa_stats_20220301_clean.csv")

# qhpvt(oa_stats_march, c("is_oa","oa_status"), "Year", "n()") this code works for count, but not for percentage

oa4pivot <- oa_stats_march %>% 
  group_by(Year) %>% 
  count(is_oa, oa_status) %>%  
  mutate(percent = 100*n/sum(n)) %>%   # calculate the percentage
  ungroup() 

oa4pivot$is_oa <- as.character(oa4pivot$is_oa)  #convert is_oa from logic to character

oa4pivot %>%   
  qhpvt(
    c("is_oa","oa_status"), 
    "Year", 
    c("Count" = "sum(n)", "%" = "sum(percent)"),
    formats = list("%.0f", "%.2f"),
    totals = list("is_oa" = "Total", "oa_status" = "Total"),
    totalStyle = list("font-weight"="bold")
    )

# not sure how to remove the Total column for Year
# pt <- PivotTable$new()
# pt$addData(oa4pivot)
# pt$addColumnDataGroups("Year")
# pt$addRowDataGroups("is_oa", 
#                     outlineTotal=list(groupStyleDeclarations=list(color="black")))
# pt$addRowDataGroups("oa_status",
#                     outlineTotal=list(groupStyleDeclarations=list(color="black")))
# pt$defineCalculation(calculationName = "count", summariseExpression = "sum(n)")
# pt$defineCalculation(calculationName = "%", summariseExpression = "round(sum(percent))")
# pt$renderPivot()

```
The table below showed the citations per paper by OA status and year: 
```{r echo=FALSE}
citations <- oa_stats_march
citations$Cited_by[is.na(citations$Cited_by) == TRUE] <- 0
citations$is_oa <- as.character(citations$is_oa)  #convert is_oa from logic to character

citations %>% 
  group_by(Year, oa_status) %>% 
  mutate(citations_per_paper = round(sum(Cited_by)/n())) %>%   # added a new column the citations per paper
  select(Year, is_oa, oa_status, Cited_by, citations_per_paper) %>%  
  ungroup() %>%  
  qhpvt(
    c("is_oa", "oa_status"), 
    "Year", 
    c("Count" = "n()", "Citations Per Paper" = "sum(citations_per_paper)/n()"),
    formats = list("%.0f", "%.0f"),
    totals = list("oa_status" = "Total", "Year" = "Total"),
    totalStyle = list("font-weight"="bold")
    )


```

# Web Stats

Comparing Jan and Feb of the four years from 2019 to 2022

## Google Analytics

### March

#### Overview

The page views of the **study spaces page** have **tripled to nearly 10,000 since 2019**. The mobile visits increased from 1,000 to about 5,000 now. **The mobile usage takes almost half of the page views of this page**. 

Comparing with the pandemic time, Jan through March of 2021(blue line), the website visits **increased around 20% in 2022**. The current page views are still **20-30% lower than those before the COVID-19**. 

<br>
![](images/pageview_jan-mar_2019-2022.png)

*Note*

* The page views of library website fluctuate on a weekly basis. The x-axis uses the date of the year 2022. The page views of other year are switched to match the fluctuation and demo the differences by year.
* The second half week of 02/05 in 2022 and the week of 02/19 in 2021, the city was hit by winter storms and the campus was closed.
* The week of 03/12 in 2019 and the week of 03/19 in 2020 & 2022 were spring breaks. 

#### Organic search vs Direct visit
* For the most visited pages like study space, ETD, books, personal librarians, doc del, and accounts, over 65% of visits came from organic searches. 

#### Desktop vs Mobile
* Most pages are still viewed on desktops. 
* Certain pages have obtained more mobile users. The mobile views of the parking and Wi-Fi pages have increased from around 65% to 77% since 2019.
* The use of tablets seems declining.

### Feb
**The overall usage of website increases comparing with the same time period of 2021, but has not come back to the level of 2019 and 2020 (pre-pandemic). **

**Home page clicks - The label [object HTMLDivElement]tab_overlay[object Object] takes over 7% of the clicks but I could not identify the element. Probably this label is for some spots on the search boxes. If true, the search box area got over 60% of the clicks. Need to follow up with this label. **


* Browsers: 65-70% sessions used Chrome; usage of Safari was slightly increased
* Channels: The percentage of sessions which came through organic searches increased from 43% to 60% in 2021 and 58% in 2022. Even before COVID-19, use of organic search was increasing. The pandemic accelerated this trend. 
* Devices: Sessions using desktop have gradually moved to mobile during 2019 through 2021. But 2022 witnessed a jump from 9% to 13% in mobile and a drop from 90% to 84% in desktop. Will follow up to see if it is a new trend. 

```{r echo=FALSE}

pageviews <- read_csv("data/pageviews.csv")

# pageviews %>% 
#   qhpvt("Name", "Year", "sum(Pageviews)")


pt <- PivotTable$new()
pt$addData(pageviews)
pt$addColumnDataGroups("Year")
pt$addRowDataGroups("Name", 
                    outlineTotal=list(groupStyleDeclarations=list(color="black")))
pt$defineCalculation(calculationName = "TotalViews", summariseExpression = "sum(Pageviews)")
pt$sortRowDataGroups(
  levelNumber = 1,
  orderBy = "calculation",
  sortOrder = "desc",
  calculationGroupName = "default"
)
#pt$asDataFrame()
pt$renderPivot()


```

## Google Business Profile

* In March 2022, the library profile received 5 reviews on Google Reviews, all were 5-star ratings.
* In Jan and Feb 2022, the library profile received 4 reviews on Google Reviews - two 5-star and two 4-star ratings
* Profile views: Jan - 17,910; Feb - 24,093, Mar - 25,049. Will keep tracking the profile views.
* Around 75% of the Google searches were preformed on desktop; while the rest 25% were on mobile. 

